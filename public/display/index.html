<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Hotel Can Quetglas</title>
  <link href="https://fonts.googleapis.com/css2?family=Josefin+Sans:wght@300;400&display=swap" rel="stylesheet">
  <style>
    @font-face {
      font-family: 'Coco Gothic';
      src: url('/fonts/CocoGothic.ttf') format('truetype');
      font-weight: normal;
      font-style: normal;
    }

    * { margin: 0; padding: 0; box-sizing: border-box; }

    :root {
      --cream: #FAF8F5;
      --warm-white: #FFFFFF;
      --sand: #F0EBE3;
      --gold: #B8956B;
      --gold-light: #D4C4A8;
      --charcoal: #2C2C2C;
      --gray: #6B6B6B;
      --gray-light: #A0A0A0;
    }

    html, body {
      width: 100%;
      height: 100%;
      overflow: hidden;
      font-family: 'Coco Gothic', 'Josefin Sans', sans-serif;
      background: var(--cream);
      color: var(--charcoal);
    }

    .container {
      width: 100%;
      height: 100%;
      display: flex;
      flex-direction: column;
    }

    /* Header */
    .header {
      padding: 40px 60px;
      display: flex;
      justify-content: space-between;
      align-items: center;
    }

    .logo img {
      height: 50px;
    }

    .logo-text {
      font-size: 24px;
      font-weight: 400;
      letter-spacing: 4px;
      color: var(--charcoal);
    }

    .header-right {
      display: flex;
      align-items: center;
      gap: 50px;
    }

    .lang-pills {
      display: flex;
      gap: 8px;
    }

    .lang-pill {
      width: 8px;
      height: 8px;
      border-radius: 50%;
      background: var(--sand);
      transition: all 0.4s ease;
    }

    .lang-pill.active {
      background: var(--gold);
      width: 24px;
      border-radius: 4px;
    }

    .datetime {
      text-align: right;
    }

    .time {
      font-size: 42px;
      font-weight: 300;
      letter-spacing: 2px;
      color: var(--charcoal);
    }

    .date {
      font-size: 12px;
      color: var(--gray);
      letter-spacing: 3px;
      text-transform: uppercase;
      margin-top: 4px;
    }

    /* Main content */
    .main {
      flex: 1;
      display: flex;
      align-items: center;
      justify-content: center;
      padding: 0 80px;
      position: relative;
    }

    .slide {
      position: absolute;
      width: 100%;
      height: 100%;
      display: flex;
      align-items: center;
      justify-content: center;
      opacity: 0;
      transition: opacity 0.8s ease;
      pointer-events: none;
    }

    .slide.active {
      opacity: 1;
      pointer-events: auto;
    }

    .slide-inner {
      text-align: center;
      max-width: 1200px;
    }

    /* Welcome */
    .welcome-label {
      font-size: 11px;
      letter-spacing: 6px;
      text-transform: uppercase;
      color: var(--gold);
      margin-bottom: 30px;
    }

    .welcome-title {
      font-size: 56px;
      font-weight: 300;
      letter-spacing: 3px;
      color: var(--charcoal);
      line-height: 1.3;
      margin-bottom: 50px;
    }

    .divider {
      width: 60px;
      height: 1px;
      background: var(--gold);
      margin: 0 auto 50px;
    }

    .wifi-box {
      display: inline-flex;
      gap: 60px;
      padding: 30px 50px;
      border: 1px solid var(--sand);
      background: var(--warm-white);
    }

    .wifi-item {
      text-align: center;
    }

    .wifi-label {
      font-size: 10px;
      letter-spacing: 3px;
      text-transform: uppercase;
      color: var(--gray-light);
      margin-bottom: 8px;
    }

    .wifi-value {
      font-size: 18px;
      letter-spacing: 2px;
      color: var(--charcoal);
    }

    /* Section header */
    .section-label {
      font-size: 11px;
      letter-spacing: 6px;
      text-transform: uppercase;
      color: var(--gold);
      margin-bottom: 20px;
    }

    .section-title {
      font-size: 42px;
      font-weight: 300;
      letter-spacing: 3px;
      color: var(--charcoal);
      margin-bottom: 60px;
    }

    /* Schedule grid with photos */
    .schedule-grid {
      display: flex;
      justify-content: center;
      gap: 30px;
    }

    .schedule-card {
      width: 240px;
      background: var(--warm-white);
      border: 1px solid var(--sand);
      text-align: center;
      transition: all 0.3s ease;
      overflow: hidden;
    }

    .schedule-card-image {
      width: 100%;
      height: 140px;
      background-size: cover;
      background-position: center;
      background-color: var(--sand);
      position: relative;
      filter: saturate(0.6);
    }

    .schedule-card-image::after {
      content: '';
      position: absolute;
      inset: 0;
      background: rgba(250, 248, 245, 0.35);
    }

    .schedule-card-content {
      padding: 25px 20px;
    }

    .schedule-icon {
      margin-bottom: 15px;
    }

    .schedule-icon svg {
      width: 32px;
      height: 32px;
      stroke: var(--gray);
      stroke-width: 1.5;
      fill: none;
    }

    .schedule-name {
      font-size: 15px;
      letter-spacing: 2px;
      color: var(--charcoal);
      margin-bottom: 8px;
    }

    .schedule-time {
      font-size: 13px;
      color: var(--gold);
      letter-spacing: 1px;
    }

    .schedule-closed {
      font-size: 12px;
      color: #dc2626;
      letter-spacing: 2px;
      text-transform: uppercase;
      font-weight: 400;
    }

    /* Services grid with photos */
    .services-grid {
      display: flex;
      justify-content: center;
      gap: 30px;
    }

    .service-card {
      width: 240px;
      text-align: center;
      background: var(--warm-white);
      border: 1px solid var(--sand);
      overflow: hidden;
    }

    .service-card-image {
      width: 100%;
      height: 140px;
      background-size: cover;
      background-position: center;
      background-color: var(--sand);
      position: relative;
      filter: saturate(0.6);
    }

    .service-card-image::after {
      content: '';
      position: absolute;
      inset: 0;
      background: rgba(250, 248, 245, 0.35);
    }

    .service-card-content {
      padding: 25px 20px;
    }

    .service-icon {
      width: 50px;
      height: 50px;
      border: 1px solid var(--gold);
      border-radius: 50%;
      display: flex;
      align-items: center;
      justify-content: center;
      margin: 0 auto 15px;
    }

    .service-icon svg {
      width: 24px;
      height: 24px;
      stroke: var(--gold);
      stroke-width: 1.5;
      fill: none;
    }

    .service-name {
      font-size: 15px;
      letter-spacing: 2px;
      color: var(--charcoal);
      margin-bottom: 8px;
    }

    .service-desc {
      font-size: 12px;
      color: var(--gray);
      line-height: 1.5;
      letter-spacing: 0.5px;
    }

    /* Weather - 5 day forecast */
    .weather-content {
      display: flex;
      align-items: flex-start;
      justify-content: center;
      gap: 60px;
    }

    .weather-today {
      text-align: center;
    }

    .weather-icon svg {
      width: 80px;
      height: 80px;
      stroke: var(--gold);
      stroke-width: 1.5;
      fill: none;
      margin-bottom: 15px;
    }

    .weather-temp {
      font-size: 72px;
      font-weight: 300;
      color: var(--charcoal);
      line-height: 1;
    }

    .weather-temp span {
      font-size: 24px;
      vertical-align: super;
    }

    .weather-desc {
      font-size: 14px;
      color: var(--gold);
      letter-spacing: 2px;
      text-transform: capitalize;
      margin-top: 10px;
    }

    .weather-location {
      font-size: 11px;
      color: var(--gray-light);
      letter-spacing: 3px;
      text-transform: uppercase;
      margin-top: 8px;
    }

    .weather-forecast {
      display: flex;
      gap: 15px;
    }

    .forecast-day {
      text-align: center;
      padding: 20px 15px;
      background: var(--warm-white);
      border: 1px solid var(--sand);
      min-width: 90px;
    }

    .forecast-day-name {
      font-size: 10px;
      letter-spacing: 2px;
      text-transform: uppercase;
      color: var(--gray);
      margin-bottom: 12px;
    }

    .forecast-icon svg {
      width: 32px;
      height: 32px;
      stroke: var(--gray);
      stroke-width: 1.5;
      fill: none;
      margin-bottom: 10px;
    }

    .forecast-temp {
      font-size: 18px;
      color: var(--charcoal);
    }

    .forecast-desc {
      font-size: 9px;
      color: var(--gray);
      letter-spacing: 1px;
      text-transform: capitalize;
      margin-top: 8px;
      line-height: 1.3;
    }

    .weather-today-date {
      font-size: 12px;
      color: var(--gray);
      letter-spacing: 2px;
      text-transform: uppercase;
      margin-bottom: 15px;
    }

    .forecast-temp-min {
      font-size: 12px;
      color: var(--gray-light);
      margin-top: 4px;
    }

    /* Footer */
    .footer {
      padding: 30px 60px;
      display: flex;
      justify-content: space-between;
      align-items: center;
    }

    .indicators {
      display: flex;
      gap: 12px;
    }

    .indicator {
      width: 30px;
      height: 3px;
      background: var(--sand);
      transition: all 0.4s ease;
      cursor: pointer;
    }

    .indicator.active {
      width: 50px;
      background: var(--gold);
    }

    .footer-info {
      display: flex;
      gap: 40px;
      font-size: 12px;
      color: var(--gray);
      letter-spacing: 2px;
    }

    .footer-wifi {
      display: flex;
      align-items: center;
      gap: 25px;
      padding: 8px 20px;
      background: var(--warm-white);
      border: 1px solid var(--sand);
    }

    .footer-wifi svg {
      width: 18px;
      height: 18px;
      stroke: var(--gold);
      stroke-width: 1.5;
      fill: none;
    }

    .footer-wifi-item {
      display: flex;
      align-items: center;
      gap: 8px;
    }

    .footer-wifi-label {
      font-size: 9px;
      color: var(--gray-light);
      letter-spacing: 2px;
      text-transform: uppercase;
    }

    .footer-wifi-value {
      font-size: 11px;
      color: var(--charcoal);
      letter-spacing: 1px;
    }

    /* Animations */
    @keyframes fadeUp {
      from { opacity: 0; transform: translateY(20px); }
      to { opacity: 1; transform: translateY(0); }
    }

    .slide.active .schedule-card,
    .slide.active .service-card,
    .slide.active .forecast-day {
      animation: fadeUp 0.6s ease forwards;
      opacity: 0;
    }

    .slide.active .schedule-card:nth-child(1),
    .slide.active .service-card:nth-child(1),
    .slide.active .forecast-day:nth-child(1) { animation-delay: 0.1s; }
    .slide.active .schedule-card:nth-child(2),
    .slide.active .service-card:nth-child(2),
    .slide.active .forecast-day:nth-child(2) { animation-delay: 0.2s; }
    .slide.active .schedule-card:nth-child(3),
    .slide.active .service-card:nth-child(3),
    .slide.active .forecast-day:nth-child(3) { animation-delay: 0.3s; }
    .slide.active .schedule-card:nth-child(4),
    .slide.active .service-card:nth-child(4),
    .slide.active .forecast-day:nth-child(4) { animation-delay: 0.4s; }
    .slide.active .forecast-day:nth-child(5) { animation-delay: 0.5s; }

    /* Video Hero Slide */
    .video-hero {
      position: relative;
      width: 100%;
      height: 100%;
      overflow: hidden;
    }

    .video-container {
      position: absolute;
      top: 50%;
      left: 50%;
      width: 100vw;
      height: 56.25vw;
      min-height: 100vh;
      min-width: 177.77vh;
      transform: translate(-50%, -50%);
      pointer-events: none;
    }

    .video-container video {
      position: absolute;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      object-fit: cover;
    }

    .video-overlay {
      position: absolute;
      inset: 0;
      background: linear-gradient(
        to bottom,
        rgba(0, 0, 0, 0.3) 0%,
        rgba(0, 0, 0, 0.1) 30%,
        rgba(0, 0, 0, 0.1) 70%,
        rgba(0, 0, 0, 0.4) 100%
      );
      display: flex;
      flex-direction: column;
      justify-content: center;
      align-items: center;
      text-align: center;
      padding: 60px;
    }

    .video-overlay .welcome-label {
      color: rgba(255, 255, 255, 0.9);
      text-shadow: 0 2px 10px rgba(0, 0, 0, 0.3);
    }

    .video-overlay .welcome-title {
      color: #FFFFFF;
      text-shadow: 0 2px 20px rgba(0, 0, 0, 0.4);
      font-size: 64px;
    }

    .video-overlay .divider {
      background: rgba(255, 255, 255, 0.8);
    }

    .video-overlay .discover-text {
      font-size: 14px;
      letter-spacing: 4px;
      text-transform: uppercase;
      color: rgba(255, 255, 255, 0.85);
      margin-top: 30px;
    }

    .video-wifi {
      background: rgba(255, 255, 255, 0.95);
      backdrop-filter: blur(10px);
      border: 1px solid rgba(255, 255, 255, 0.5);
      box-shadow: 0 4px 30px rgba(0, 0, 0, 0.1);
    }

    .video-wifi .wifi-label {
      color: var(--gray);
    }

    .video-wifi .wifi-value {
      color: var(--charcoal);
    }

    /* Loading */
    .loading {
      position: fixed;
      inset: 0;
      background: var(--cream);
      display: flex;
      align-items: center;
      justify-content: center;
      z-index: 100;
      transition: opacity 0.5s ease;
    }

    .loading.hidden {
      opacity: 0;
      pointer-events: none;
    }

    .loader {
      width: 30px;
      height: 30px;
      border: 2px solid var(--sand);
      border-top-color: var(--gold);
      border-radius: 50%;
      animation: spin 0.8s linear infinite;
    }

    @keyframes spin { to { transform: rotate(360deg); } }
  </style>
</head>
<body>
  <div class="loading" id="loading"><div class="loader"></div></div>

  <div class="container">
    <header class="header">
      <div class="logo">
        <img src="https://hotelcanquetglas.com/wp-content/uploads/2023/05/logobbm3-1.png" alt="Hotel Can Quetglas" onerror="this.outerHTML='<span class=\'logo-text\'>CAN QUETGLAS</span>'">
      </div>
      <div class="header-right">
        <div class="lang-pills">
          <div class="lang-pill" data-lang="es"></div>
          <div class="lang-pill" data-lang="en"></div>
          <div class="lang-pill" data-lang="de"></div>
        </div>
        <div class="datetime">
          <div class="time" id="clock">00:00</div>
          <div class="date" id="date"></div>
        </div>
      </div>
    </header>

    <main class="main" id="slides"></main>

    <footer class="footer">
      <div class="indicators" id="indicators"></div>
      <div class="footer-wifi" id="footer-wifi"></div>
      <div class="footer-info">
        <span>Palma de Mallorca</span>
        <span id="phone">+34 871 626 000</span>
      </div>
    </footer>
  </div>

  <script>
    // SVG Icons - minimalist line style
    const svgIcons = {
      'coffee': '<svg viewBox="0 0 24 24"><path d="M18 8h1a4 4 0 0 1 0 8h-1"/><path d="M2 8h16v9a4 4 0 0 1-4 4H6a4 4 0 0 1-4-4V8z"/><line x1="6" y1="1" x2="6" y2="4"/><line x1="10" y1="1" x2="10" y2="4"/><line x1="14" y1="1" x2="14" y2="4"/></svg>',
      'log-out': '<svg viewBox="0 0 24 24"><path d="M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4"/><polyline points="16 17 21 12 16 7"/><line x1="21" y1="12" x2="9" y2="12"/></svg>',
      'waves': '<svg viewBox="0 0 24 24"><path d="M2 12c2-2 4-2 6 0s4 2 6 0 4-2 6 0"/><path d="M2 6c2-2 4-2 6 0s4 2 6 0 4-2 6 0"/><path d="M2 18c2-2 4-2 6 0s4 2 6 0 4-2 6 0"/></svg>',
      'wifi': '<svg viewBox="0 0 24 24"><path d="M5 12.55a11 11 0 0 1 14.08 0"/><path d="M1.42 9a16 16 0 0 1 21.16 0"/><path d="M8.53 16.11a6 6 0 0 1 6.95 0"/><circle cx="12" cy="20" r="1"/></svg>',
      'car': '<svg viewBox="0 0 24 24"><path d="M14 16H9m10 0h3v-3.15a1 1 0 0 0-.84-.99L16 11l-2.7-3.6a1 1 0 0 0-.8-.4H5.24a2 2 0 0 0-1.8 1.1l-.8 1.63A6 6 0 0 0 2 12.42V16h2"/><circle cx="6.5" cy="16.5" r="2.5"/><circle cx="16.5" cy="16.5" r="2.5"/></svg>',
      'sun': '<svg viewBox="0 0 24 24"><circle cx="12" cy="12" r="5"/><line x1="12" y1="1" x2="12" y2="3"/><line x1="12" y1="21" x2="12" y2="23"/><line x1="4.22" y1="4.22" x2="5.64" y2="5.64"/><line x1="18.36" y1="18.36" x2="19.78" y2="19.78"/><line x1="1" y1="12" x2="3" y2="12"/><line x1="21" y1="12" x2="23" y2="12"/><line x1="4.22" y1="19.78" x2="5.64" y2="18.36"/><line x1="18.36" y1="5.64" x2="19.78" y2="4.22"/></svg>',
      'utensils': '<svg viewBox="0 0 24 24"><path d="M3 2v7c0 1.1.9 2 2 2h4a2 2 0 0 0 2-2V2"/><path d="M7 2v20"/><path d="M21 15V2v0a5 5 0 0 0-5 5v6c0 1.1.9 2 2 2h3zm0 0v7"/></svg>',
      'spa': '<svg viewBox="0 0 24 24"><path d="M12 22c-4-3-8-6-8-11a8 8 0 1 1 16 0c0 5-4 8-8 11z"/><circle cx="12" cy="11" r="3"/></svg>',
      'gym': '<svg viewBox="0 0 24 24"><path d="M6.5 6.5h11"/><path d="M6.5 17.5h11"/><path d="M4 10v4"/><path d="M20 10v4"/><path d="M2 11v2"/><path d="M22 11v2"/><path d="M12 6.5v11"/></svg>',
      'terrace': '<svg viewBox="0 0 24 24"><path d="M12 3v18"/><path d="M3 12h18"/><path d="M5.5 5.5l13 13"/><path d="M18.5 5.5l-13 13"/><circle cx="12" cy="12" r="9"/></svg>',
      'concierge-bell': '<svg viewBox="0 0 24 24"><path d="M3 20h18"/><path d="M5 20v-2a7 7 0 0 1 14 0v2"/><circle cx="12" cy="10" r="1"/><path d="M12 6v3"/></svg>',
      'snack': '<svg viewBox="0 0 24 24"><path d="M8 2h8l2 5H6l2-5z"/><path d="M6 7h12v2a6 6 0 0 1-12 0V7z"/><path d="M9 15v5"/><path d="M15 15v5"/><path d="M7 20h10"/></svg>',
      'transfer': '<svg viewBox="0 0 24 24"><rect x="1" y="6" width="15" height="10" rx="2"/><path d="M16 8h4l3 4v4h-3"/><circle cx="5.5" cy="16.5" r="2.5"/><circle cx="18.5" cy="16.5" r="2.5"/><path d="M8 16h8"/></svg>',
      'flowers': '<svg viewBox="0 0 24 24"><path d="M12 16c-3-5-7-4-7 0s4 5 7 0z"/><path d="M12 16c3-5 7-4 7 0s-4 5-7 0z"/><path d="M12 16V22"/><circle cx="12" cy="8" r="3"/><path d="M12 5V2"/><path d="M9 6L7 4"/><path d="M15 6l2-2"/></svg>',
      'bike': '<svg viewBox="0 0 24 24"><circle cx="5" cy="17" r="3"/><circle cx="19" cy="17" r="3"/><path d="M12 17l-3-7h5l3 7"/><path d="M9 10l3-4"/><circle cx="12" cy="5" r="1"/></svg>',
      'laundry': '<svg viewBox="0 0 24 24"><rect x="3" y="2" width="18" height="20" rx="2"/><circle cx="12" cy="13" r="5"/><circle cx="12" cy="13" r="2"/><circle cx="7" cy="5" r="1"/><circle cx="10" cy="5" r="1"/></svg>',
      'iron': '<svg viewBox="0 0 24 24"><path d="M3 17h18l-3-8H9l-6 8z"/><path d="M9 9V5a2 2 0 0 1 2-2h2a2 2 0 0 1 2 2v4"/><line x1="6" y1="17" x2="6" y2="20"/><line x1="18" y1="17" x2="18" y2="20"/></svg>',
      'baby': '<svg viewBox="0 0 24 24"><path d="M6 12a6 6 0 0 0 12 0V6H6v6z"/><path d="M4 6h16"/><path d="M9 6V4"/><path d="M15 6V4"/><circle cx="9" cy="10" r="1"/><circle cx="15" cy="10" r="1"/><path d="M9 14c1.5 1 4.5 1 6 0"/><path d="M6 18h12v2a2 2 0 0 1-2 2H8a2 2 0 0 1-2-2v-2z"/></svg>',
      'pet': '<svg viewBox="0 0 24 24"><circle cx="6" cy="6" r="2"/><circle cx="18" cy="6" r="2"/><circle cx="4" cy="12" r="2"/><circle cx="20" cy="12" r="2"/><path d="M12 22c-3 0-5-2-5-5 0-2 2-4 5-6 3 2 5 4 5 6 0 3-2 5-5 5z"/></svg>',
      'luggage': '<svg viewBox="0 0 24 24"><rect x="6" y="6" width="12" height="16" rx="2"/><path d="M9 6V4a1 1 0 0 1 1-1h4a1 1 0 0 1 1 1v2"/><line x1="9" y1="10" x2="15" y2="10"/><line x1="9" y1="14" x2="15" y2="14"/><line x1="8" y1="22" x2="8" y2="24"/><line x1="16" y1="22" x2="16" y2="24"/></svg>',
      'default': '<svg viewBox="0 0 24 24"><circle cx="12" cy="12" r="10"/></svg>'
    };

    // Weather SVG icons
    const weatherSvgIcons = {
      '01d': '<svg viewBox="0 0 24 24"><circle cx="12" cy="12" r="5"/><line x1="12" y1="1" x2="12" y2="3"/><line x1="12" y1="21" x2="12" y2="23"/><line x1="4.22" y1="4.22" x2="5.64" y2="5.64"/><line x1="18.36" y1="18.36" x2="19.78" y2="19.78"/><line x1="1" y1="12" x2="3" y2="12"/><line x1="21" y1="12" x2="23" y2="12"/><line x1="4.22" y1="19.78" x2="5.64" y2="18.36"/><line x1="18.36" y1="5.64" x2="19.78" y2="4.22"/></svg>',
      '01n': '<svg viewBox="0 0 24 24"><path d="M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"/></svg>',
      '02d': '<svg viewBox="0 0 24 24"><circle cx="12" cy="10" r="4"/><line x1="12" y1="2" x2="12" y2="4"/><line x1="4.93" y1="4.93" x2="6.34" y2="6.34"/><line x1="2" y1="10" x2="4" y2="10"/><path d="M8 16H6a4 4 0 0 1 0-8h.5"/><path d="M20 16H8a4 4 0 0 1 0-8h.5a5.5 5.5 0 0 1 11 0 4 4 0 0 1-.5 8z"/></svg>',
      '02n': '<svg viewBox="0 0 24 24"><path d="M17.5 19H9a7 7 0 1 1 6.71-9h1.79a4.5 4.5 0 1 1 0 9z"/></svg>',
      '03d': '<svg viewBox="0 0 24 24"><path d="M17.5 19H9a7 7 0 1 1 6.71-9h1.79a4.5 4.5 0 1 1 0 9z"/></svg>',
      '03n': '<svg viewBox="0 0 24 24"><path d="M17.5 19H9a7 7 0 1 1 6.71-9h1.79a4.5 4.5 0 1 1 0 9z"/></svg>',
      '04d': '<svg viewBox="0 0 24 24"><path d="M17.5 19H9a7 7 0 1 1 6.71-9h1.79a4.5 4.5 0 1 1 0 9z"/></svg>',
      '04n': '<svg viewBox="0 0 24 24"><path d="M17.5 19H9a7 7 0 1 1 6.71-9h1.79a4.5 4.5 0 1 1 0 9z"/></svg>',
      '09d': '<svg viewBox="0 0 24 24"><path d="M17.5 17H9a7 7 0 1 1 6.71-9h1.79a4.5 4.5 0 1 1 0 9z"/><line x1="8" y1="19" x2="8" y2="21"/><line x1="12" y1="19" x2="12" y2="21"/><line x1="16" y1="19" x2="16" y2="21"/></svg>',
      '09n': '<svg viewBox="0 0 24 24"><path d="M17.5 17H9a7 7 0 1 1 6.71-9h1.79a4.5 4.5 0 1 1 0 9z"/><line x1="8" y1="19" x2="8" y2="21"/><line x1="12" y1="19" x2="12" y2="21"/><line x1="16" y1="19" x2="16" y2="21"/></svg>',
      '10d': '<svg viewBox="0 0 24 24"><path d="M17.5 17H9a7 7 0 1 1 6.71-9h1.79a4.5 4.5 0 1 1 0 9z"/><line x1="8" y1="19" x2="8" y2="21"/><line x1="12" y1="19" x2="12" y2="21"/><line x1="16" y1="19" x2="16" y2="21"/></svg>',
      '10n': '<svg viewBox="0 0 24 24"><path d="M17.5 17H9a7 7 0 1 1 6.71-9h1.79a4.5 4.5 0 1 1 0 9z"/><line x1="8" y1="19" x2="8" y2="21"/><line x1="12" y1="19" x2="12" y2="21"/><line x1="16" y1="19" x2="16" y2="21"/></svg>',
      '11d': '<svg viewBox="0 0 24 24"><path d="M17.5 17H9a7 7 0 1 1 6.71-9h1.79a4.5 4.5 0 1 1 0 9z"/><polyline points="13 19 9 23 14 23 10 27"/></svg>',
      '11n': '<svg viewBox="0 0 24 24"><path d="M17.5 17H9a7 7 0 1 1 6.71-9h1.79a4.5 4.5 0 1 1 0 9z"/><polyline points="13 19 9 23 14 23 10 27"/></svg>',
      '13d': '<svg viewBox="0 0 24 24"><line x1="12" y1="2" x2="12" y2="6"/><line x1="12" y1="18" x2="12" y2="22"/><line x1="4.93" y1="4.93" x2="7.76" y2="7.76"/><line x1="16.24" y1="16.24" x2="19.07" y2="19.07"/><line x1="2" y1="12" x2="6" y2="12"/><line x1="18" y1="12" x2="22" y2="12"/><line x1="4.93" y1="19.07" x2="7.76" y2="16.24"/><line x1="16.24" y1="7.76" x2="19.07" y2="4.93"/></svg>',
      '13n': '<svg viewBox="0 0 24 24"><line x1="12" y1="2" x2="12" y2="6"/><line x1="12" y1="18" x2="12" y2="22"/><line x1="4.93" y1="4.93" x2="7.76" y2="7.76"/><line x1="16.24" y1="16.24" x2="19.07" y2="19.07"/><line x1="2" y1="12" x2="6" y2="12"/><line x1="18" y1="12" x2="22" y2="12"/><line x1="4.93" y1="19.07" x2="7.76" y2="16.24"/><line x1="16.24" y1="7.76" x2="19.07" y2="4.93"/></svg>',
      '50d': '<svg viewBox="0 0 24 24"><line x1="3" y1="8" x2="21" y2="8"/><line x1="5" y1="12" x2="19" y2="12"/><line x1="7" y1="16" x2="17" y2="16"/></svg>',
      '50n': '<svg viewBox="0 0 24 24"><line x1="3" y1="8" x2="21" y2="8"/><line x1="5" y1="12" x2="19" y2="12"/><line x1="7" y1="16" x2="17" y2="16"/></svg>',
      'default': '<svg viewBox="0 0 24 24"><circle cx="12" cy="12" r="5"/><line x1="12" y1="1" x2="12" y2="3"/><line x1="12" y1="21" x2="12" y2="23"/><line x1="4.22" y1="4.22" x2="5.64" y2="5.64"/><line x1="18.36" y1="18.36" x2="19.78" y2="19.78"/><line x1="1" y1="12" x2="3" y2="12"/><line x1="21" y1="12" x2="23" y2="12"/></svg>'
    };

    // Hotel images - replace with your own
    const hotelImages = {
      breakfast: '/images/breakfast.jpg',
      checkout: '/images/checkout.jpg',
      pool: '/images/pool.jpg',
      reception: '/images/reception.jpg',
      wifi: '/images/wifi.jpg',
      parking: '/images/parking.jpg',
      terrace: '/images/terrace.jpg'
    };

    let data = null, weather = null, forecast = null, currentSlide = 0, currentLang = 'es', langIndex = 0;
    const languages = ['es', 'en', 'de'];

    const labels = {
      es: { welcome: 'Bienvenidos', schedule: 'Horarios', services: 'Servicios', weather: 'El Tiempo en Palma', wifi: 'WiFi Gratuito', network: 'Red', password: 'Contrasena', humidity: 'Humedad', wind: 'Viento', feelsLike: 'Sensacion', boutique: 'Hotel Boutique', today: 'Hoy', closed: 'Cerrado' },
      en: { welcome: 'Welcome', schedule: 'Schedule', services: 'Services', weather: 'Weather in Palma', wifi: 'Free WiFi', network: 'Network', password: 'Password', humidity: 'Humidity', wind: 'Wind', feelsLike: 'Feels like', boutique: 'Boutique Hotel', today: 'Today', closed: 'Closed' },
      de: { welcome: 'Willkommen', schedule: 'Offnungszeiten', services: 'Services', weather: 'Wetter in Palma', wifi: 'Kostenloses WLAN', network: 'Netzwerk', password: 'Passwort', humidity: 'Feuchtigkeit', wind: 'Wind', feelsLike: 'Gefuhlt', boutique: 'Boutique Hotel', today: 'Heute', closed: 'Geschlossen' }
    };

    function isCurrentlyClosed(item) {
      if (!item.is_closed) return false;
      if (!item.closed_from || !item.closed_to) return true;
      const today = new Date();
      const thisYear = today.getFullYear();
      // Parse dates (stored as YYYY-MM-DD)
      const fromParts = item.closed_from.split('-');
      const toParts = item.closed_to.split('-');
      const fromMonth = parseInt(fromParts[1]);
      const fromDay = parseInt(fromParts[2]);
      const toMonth = parseInt(toParts[1]);
      const toDay = parseInt(toParts[2]);
      // Handle ranges that cross year boundary (e.g., Nov 1 - Mar 31)
      const fromDate = new Date(thisYear, fromMonth - 1, fromDay);
      let toDate = new Date(thisYear, toMonth - 1, toDay);
      if (toDate < fromDate) {
        // Range crosses year boundary
        if (today >= fromDate) return true;
        toDate = new Date(thisYear, toMonth - 1, toDay);
        if (today <= toDate) return true;
        return false;
      }
      return today >= fromDate && today <= toDate;
    }

    const dayNames = {
      es: ['Dom', 'Lun', 'Mar', 'Mie', 'Jue', 'Vie', 'Sab'],
      en: ['Sun', 'Mon', 'Tue', 'Wed', 'Thu', 'Fri', 'Sat'],
      de: ['So', 'Mo', 'Di', 'Mi', 'Do', 'Fr', 'Sa']
    };

    async function init() {
      await loadData();
      await loadWeather();
      render();
      startClock();
      setInterval(() => goToSlide((currentSlide + 1) % 5), parseInt(data?.settings?.slide_duration) || 12000);
      setInterval(() => { langIndex = (langIndex + 1) % 3; changeLang(languages[langIndex]); }, (parseInt(data?.settings?.slide_duration) || 12000) * 5);
      setInterval(loadData, 300000);
      setInterval(loadWeather, 1800000);
      document.getElementById('loading').classList.add('hidden');
    }

    async function loadData() {
      try { data = await (await fetch('/api/display')).json(); document.getElementById('phone').textContent = data.settings.hotel_phone || '+34 871 626 000'; } catch (e) {}
    }

    async function loadWeather() {
      if (!data?.settings?.weather_api_key) return;
      const lat = data.settings.weather_lat || '39.5696';
      const lon = data.settings.weather_lon || '2.6502';
      const apiKey = data.settings.weather_api_key;
      try {
        // Current weather
        weather = await (await fetch(`https://api.openweathermap.org/data/2.5/weather?lat=${lat}&lon=${lon}&appid=${apiKey}&units=metric&lang=${currentLang}`)).json();
        // 5 day forecast
        const forecastData = await (await fetch(`https://api.openweathermap.org/data/2.5/forecast?lat=${lat}&lon=${lon}&appid=${apiKey}&units=metric&lang=${currentLang}`)).json();
        // Process forecast to get one entry per day
        forecast = processForecast(forecastData);
      } catch (e) { console.error(e); }
    }

    function processForecast(data) {
      if (!data?.list) return [];
      const days = {};
      const today = new Date().toDateString();
      data.list.forEach(item => {
        const date = new Date(item.dt * 1000);
        const dateStr = date.toDateString();
        if (dateStr === today) return; // Skip today
        if (!days[dateStr]) {
          days[dateStr] = {
            date: date,
            temps: [],
            icon: item.weather[0].icon,
            desc: item.weather[0].description
          };
        }
        days[dateStr].temps.push(item.main.temp);
        // Prefer midday icon and description
        if (date.getHours() >= 11 && date.getHours() <= 14) {
          days[dateStr].icon = item.weather[0].icon;
          days[dateStr].desc = item.weather[0].description;
        }
      });
      return Object.values(days).slice(0, 5).map(d => ({
        day: d.date.getDay(),
        max: Math.round(Math.max(...d.temps)),
        min: Math.round(Math.min(...d.temps)),
        icon: d.icon,
        desc: d.desc
      }));
    }

    function render() {
      const container = document.getElementById('slides');
      const ind = document.getElementById('indicators');
      container.innerHTML = '';
      ind.innerHTML = '';

      // Video Hero (Mallorca)
      const videoLabels = {
        es: { discover: 'Descubre Mallorca', tagline: 'Un paraiso en el Mediterraneo' },
        en: { discover: 'Discover Mallorca', tagline: 'A Mediterranean Paradise' },
        de: { discover: 'Entdecken Sie Mallorca', tagline: 'Ein Paradies im Mittelmeer' }
      };
      container.innerHTML += `<div class="slide active">
        <div class="video-hero">
          <div class="video-container">
            <video autoplay muted loop playsinline>
              <source src="/videos/mallorca.mp4" type="video/mp4">
            </video>
          </div>
          <div class="video-overlay">
            <p class="welcome-label">${videoLabels[currentLang].discover}</p>
            <h1 class="welcome-title">${videoLabels[currentLang].tagline}</h1>
            <div class="divider"></div>
            <p class="discover-text">Hotel Can Quetglas</p>
          </div>
        </div>
      </div>`;

      // Welcome with Bellver video background
      container.innerHTML += `<div class="slide">
        <div class="video-hero">
          <div class="video-container">
            <video autoplay muted loop playsinline>
              <source src="/videos/bellver.mp4" type="video/mp4">
            </video>
          </div>
          <div class="video-overlay">
            <p class="welcome-label">${labels[currentLang].boutique}</p>
            <h1 class="welcome-title">${data?.settings?.[`welcome_message_${currentLang}`] || labels[currentLang].welcome}</h1>
            <div class="divider"></div>
            <p class="discover-text">Palma de Mallorca</p>
          </div>
        </div>
      </div>`;

      // Update footer WiFi
      const wifiIcon = '<svg viewBox="0 0 24 24"><path d="M5 12.55a11 11 0 0 1 14.08 0"/><path d="M1.42 9a16 16 0 0 1 21.16 0"/><path d="M8.53 16.11a6 6 0 0 1 6.95 0"/><circle cx="12" cy="20" r="1"/></svg>';
      document.getElementById('footer-wifi').innerHTML = `
        ${wifiIcon}
        <div class="footer-wifi-item"><span class="footer-wifi-label">${labels[currentLang].network}</span><span class="footer-wifi-value">${data?.settings?.wifi_network || 'Hotel Can Quetglas'}</span></div>
        <div class="footer-wifi-item"><span class="footer-wifi-label">${labels[currentLang].password}</span><span class="footer-wifi-value">${data?.settings?.wifi_password || '--------'}</span></div>
      `;

      // Schedule with images
      let scheduleHTML = (data?.schedule || []).map(i => {
        const img = i.image ? `<div class="schedule-card-image" style="background-image: url('${i.image}')"></div>` : '';
        const closed = isCurrentlyClosed(i);
        const timeOrClosed = closed
          ? `<div class="schedule-closed">${labels[currentLang].closed}</div>`
          : `<div class="schedule-time">${i.time_end ? i.time_start + ' - ' + i.time_end : i.time_start}</div>`;
        return `<div class="schedule-card">
          ${img}
          <div class="schedule-card-content">
            <div class="schedule-icon">${svgIcons[i.icon] || svgIcons.default}</div>
            <div class="schedule-name">${i[`name_${currentLang}`] || i.name_es}</div>
            ${timeOrClosed}
          </div>
        </div>`;
      }).join('');
      container.innerHTML += `<div class="slide"><div class="slide-inner"><p class="section-label">Hotel Can Quetglas</p><h2 class="section-title">${labels[currentLang].schedule}</h2><div class="schedule-grid">${scheduleHTML}</div></div></div>`;

      // Services with images
      let servicesHTML = (data?.services || []).map(s => {
        const img = s.image ? `<div class="service-card-image" style="background-image: url('${s.image}')"></div>` : '';
        return `<div class="service-card">
          ${img}
          <div class="service-card-content">
            <div class="service-icon">${svgIcons[s.icon] || svgIcons.default}</div>
            <div class="service-name">${s[`name_${currentLang}`] || s.name_es}</div>
            <div class="service-desc">${s[`description_${currentLang}`] || s.description_es}</div>
          </div>
        </div>`;
      }).join('');
      container.innerHTML += `<div class="slide"><div class="slide-inner"><p class="section-label">Hotel Can Quetglas</p><h2 class="section-title">${labels[currentLang].services}</h2><div class="services-grid">${servicesHTML}</div></div></div>`;

      // Weather with 5-day forecast
      let forecastHTML = (forecast || []).map(f => `
        <div class="forecast-day">
          <div class="forecast-day-name">${dayNames[currentLang][f.day]}</div>
          <div class="forecast-icon">${weatherSvgIcons[f.icon] || weatherSvgIcons.default}</div>
          <div class="forecast-temp">${f.max}째</div>
          <div class="forecast-temp-min">${f.min}째</div>
          <div class="forecast-desc">${f.desc || ''}</div>
        </div>
      `).join('');

      // Today's date info
      const now = new Date();
      const todayDayName = dayNames[currentLang][now.getDay()];
      const todayDate = `${String(now.getDate()).padStart(2, '0')}/${String(now.getMonth() + 1).padStart(2, '0')}`;

      const hotelAddress = data?.settings?.hotel_address || 'Palma de Mallorca';
      let weatherHTML = weather?.main ? `<div class="weather-content">
        <div class="weather-today">
          <div class="weather-today-date">${todayDayName}, ${todayDate}</div>
          <div class="weather-icon">${weatherSvgIcons[weather.weather?.[0]?.icon] || weatherSvgIcons.default}</div>
          <div class="weather-temp">${Math.round(weather.main.temp)}<span>째C</span></div>
          <div class="weather-desc">${weather.weather?.[0]?.description || ''}</div>
        </div>
        <div class="weather-forecast">${forecastHTML}</div>
      </div>` : `<div class="weather-content"><div class="weather-today"><div class="weather-icon">${weatherSvgIcons.default}</div><div class="weather-temp">--<span>째C</span></div><div class="weather-desc">Configura API Key en Admin</div></div></div>`;
      container.innerHTML += `<div class="slide"><div class="slide-inner"><p class="section-label">Hotel Can Quetglas</p><h2 class="section-title">${labels[currentLang].weather}</h2>${weatherHTML}</div></div>`;

      // Update footer address
      document.querySelector('.footer-info span:first-child').textContent = hotelAddress;

      for (let i = 0; i < 5; i++) { const d = document.createElement('div'); d.className = `indicator${i === 0 ? ' active' : ''}`; d.onclick = () => goToSlide(i); ind.appendChild(d); }
      document.querySelector(`.lang-pill[data-lang="${currentLang}"]`)?.classList.add('active');
    }

    function goToSlide(i) {
      document.querySelectorAll('.slide').forEach((s, idx) => s.classList.toggle('active', idx === i));
      document.querySelectorAll('.indicator').forEach((ind, idx) => ind.classList.toggle('active', idx === i));
      currentSlide = i;
    }

    async function changeLang(lang) {
      currentLang = lang;
      document.querySelectorAll('.lang-pill').forEach(p => p.classList.toggle('active', p.dataset.lang === lang));
      const idx = currentSlide;
      await loadWeather();
      render();
      goToSlide(idx);
    }

    function startClock() {
      const update = () => {
        const now = new Date();
        document.getElementById('clock').textContent = now.toLocaleTimeString(currentLang, { hour: '2-digit', minute: '2-digit' });
        document.getElementById('date').textContent = now.toLocaleDateString(currentLang, { weekday: 'long', day: 'numeric', month: 'long', year: 'numeric' });
      };
      update();
      setInterval(update, 1000);
    }

    init();
  </script>
</body>
</html>
